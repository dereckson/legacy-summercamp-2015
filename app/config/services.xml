<?xml version="1.0" encoding="UTF-8" ?>
<container xmlns="http://symfony.com/schema/dic/services"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">

    <parameters>
        <parameter key="twig.paths" type="collection">
            <parameter>../../app/Resources/views</parameter>
        </parameter>
    </parameters>
    
    <services>
        <service
            id="twig.template_loader"
            class="Twig_Loader_Filesystem">
            <argument>%twig.paths%</argument>
        </service>
	    <service
	        id="twig.renderer"
	        class="Twig_Environment">
	        <argument type="service" id="twig.template_loader" />
	    </service>
        
        <service
            id="acme.postage.repository"
            class="Acme\Infrastructure\Sqlite\PostageSqliteRepository">
        </service>
        <service
            id="acme.postcard.repository"
            class="Acme\Infrastructure\Sqlite\PostcardSqliteRepository">
        </service>
        
        <service
            id="acme.postage.calculator"
            class="Acme\Basket\PostageCalculator">
            <argument type="service" id="acme.postage.repository" />
        </service>
        
        <service
            id="acme.basket.view"
            class="Acme\Basket\BasketView">
            <argument type="service" id="acme.postage.calculator" />
            <argument type="service" id="acme.postcard.repository" />
        </service>
        
        <service
            id="acme.postcard_view.controller"
            class="Acme\Postcard\PostcardViewController">
            <argument type="service" id="acme.postcard.repository" />
            <argument type="service" id="twig.renderer" />
        </service>
    </services>
</container>